// Install Instructions
// Author : Drumsticks1
// GitHub : https://github.com/Drumsticks1/TS3-LogDataViewer

This installation instructions are intended for any linux distribution.
Experienced users may also install it on other operating systems but I may not be able to help with issues regarding anything else than linux.

- Create a directory for the LogDataViewer in a directory which can be accessed on your server via nginx (e.g. ""/var/www/www.your-domain.com/ts3-ldv").
    - Set the directory owner to the user that will run the server-side app (recommended: create a new user for this, e.g. ts3-ldv).
    - Set the directory group to your webserver group (e.g. www-data).
- Head over to the directory you created in the first step and execute "npm install ts3-ldv".
- Modify the conf.json in the conf folder according to your web server and your preferences (Information about the possible settings can be found in the Configuration section in README.md).
    - If you don't change the programLog setting you will have to create a directory /var/log/ts3-ldv/ and set the directory owner to the user that will run the server-side app.
- Follow the steps in the nginx section below before proceeding to the next step.
- (optional, recommended) Copy the ts3-ldv.server file to your systemd service folder and modify the settings according to your installation.
- (optional, recommended) Copy the ts3-ldv.logrotate file for your logrotate.d config folder and rename the file to ts3-ldv (you need to change the log path if you changed the programLog setting in conf.json).
- You should now be able to start the server-side app via "service ts3-ldv start", access the location on your domain via your browser and access the interface.

If the program fails to start, doesn't work properly or you run into any other issues:
Check the program log first and ensure that you configured the paths right.


nginx configuration:

This section only covers the part of the nginx configuration for ts3-ldv integration.
If you aren't familiar with nginx: Take your time and create a secure configuration before adding
the following code to your nginx domain configuration located in the sites-enabled folder.

Security:
Another important thing is that you secure the access to the ts3-ldv page as it contains sensitive information and
should be considered a security risk when accessible by untrustworthy users!
If you aren't familiar with this you should probably have a look at this part of the nginx docs:
    http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html

(I also recommend something like fail2ban for preventing brute-forcing the auth, but you will have to google for this yourself)

The following lines are a template for the configuration that allows access to specific locations on the server only.
Inside the "location / {}" block you will have to replace the two occurrences of "/ts3-ldv/" according to the path of
the directory you created in the first step.
Additionally if you modified the port setting in conf.json you need to modify the port in the proxy_pass directive.


# Allow access to specific locations only - check nginx documentation for more information.
location / {
    try_files $uri $uri/ /index.html =404;

    # Modify the location according to your installation.
    location /ts3-ldv {
        auth_basic "Authentication required!";
        auth_basic_user_file /path/to/your/auth/file/.htpasswd;

        location /ts3-ldv/express/buildJSON {
            # Modify the port according to your port settings in conf.json.
            proxy_pass    http://127.0.0.1:3000/buildJSON;
        }
    }
}


Feel free to open an issue on GitHub for improvement suggestions for the Install Instructions!
